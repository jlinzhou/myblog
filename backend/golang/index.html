<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>golang基础 | 一朝春诔</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="assets/img/favicon.ico">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">
    <meta name="description" content="一朝春诔的学习笔记">
    <meta name="author" content="一朝春诔">
    <meta name="keywords" content="vuepress介绍，vuepress说明，一朝春诔">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.27faccf6.css" as="style"><link rel="preload" href="/assets/js/app.9c66cc77.js" as="script"><link rel="preload" href="/assets/js/6.a4c4b5d6.js" as="script"><link rel="preload" href="/assets/js/2.1492d491.js" as="script"><link rel="preload" href="/assets/js/10.87145463.js" as="script"><link rel="preload" href="/assets/js/3.90399333.js" as="script"><link rel="prefetch" href="/assets/js/11.221fba97.js"><link rel="prefetch" href="/assets/js/12.6d618a9e.js"><link rel="prefetch" href="/assets/js/13.5621dfa6.js"><link rel="prefetch" href="/assets/js/14.c9255355.js"><link rel="prefetch" href="/assets/js/15.7978d65f.js"><link rel="prefetch" href="/assets/js/16.a4bbafb3.js"><link rel="prefetch" href="/assets/js/17.155e45f3.js"><link rel="prefetch" href="/assets/js/18.1e424122.js"><link rel="prefetch" href="/assets/js/19.ba302dd1.js"><link rel="prefetch" href="/assets/js/20.9a4ebae3.js"><link rel="prefetch" href="/assets/js/21.9f481994.js"><link rel="prefetch" href="/assets/js/22.100055d7.js"><link rel="prefetch" href="/assets/js/23.d2447aea.js"><link rel="prefetch" href="/assets/js/24.28bff12b.js"><link rel="prefetch" href="/assets/js/25.3fbec856.js"><link rel="prefetch" href="/assets/js/26.0cc822d1.js"><link rel="prefetch" href="/assets/js/27.46c53fa6.js"><link rel="prefetch" href="/assets/js/28.20bad81c.js"><link rel="prefetch" href="/assets/js/29.b3f96c7b.js"><link rel="prefetch" href="/assets/js/30.85ff35d9.js"><link rel="prefetch" href="/assets/js/31.34457343.js"><link rel="prefetch" href="/assets/js/32.d29e33a7.js"><link rel="prefetch" href="/assets/js/33.7f0bb146.js"><link rel="prefetch" href="/assets/js/34.f628d425.js"><link rel="prefetch" href="/assets/js/35.8da0a2e7.js"><link rel="prefetch" href="/assets/js/36.886317b1.js"><link rel="prefetch" href="/assets/js/37.32c5abff.js"><link rel="prefetch" href="/assets/js/38.5c38d261.js"><link rel="prefetch" href="/assets/js/39.6e003123.js"><link rel="prefetch" href="/assets/js/4.9afa6061.js"><link rel="prefetch" href="/assets/js/40.ec5c04a8.js"><link rel="prefetch" href="/assets/js/41.baef0e46.js"><link rel="prefetch" href="/assets/js/42.54abc729.js"><link rel="prefetch" href="/assets/js/43.c6d0b564.js"><link rel="prefetch" href="/assets/js/44.6174cfcf.js"><link rel="prefetch" href="/assets/js/45.09f6dca3.js"><link rel="prefetch" href="/assets/js/46.da2e383b.js"><link rel="prefetch" href="/assets/js/47.63973a6e.js"><link rel="prefetch" href="/assets/js/48.dfd70d39.js"><link rel="prefetch" href="/assets/js/49.54fd64f2.js"><link rel="prefetch" href="/assets/js/5.e99d3266.js"><link rel="prefetch" href="/assets/js/50.a7cbc80a.js"><link rel="prefetch" href="/assets/js/51.0e2ca6d1.js"><link rel="prefetch" href="/assets/js/7.be7c9864.js"><link rel="prefetch" href="/assets/js/8.e855ae57.js"><link rel="prefetch" href="/assets/js/9.a7df38a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.27faccf6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一朝春诔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/golang/" class="nav-link router-link-exact-active router-link-active">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/backend/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/backend/cplus/" class="nav-link">
  c++
</a></li><li class="dropdown-item"><!----> <a href="/backend/lua/" class="nav-link">
  lua
</a></li><li class="dropdown-item"><!----> <a href="/backend/vba/" class="nav-link">
  vba
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/database/mongodb/" class="nav-link">
  mongodb
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  redis
</a></li><li class="dropdown-item"><!----> <a href="/database/etcd/" class="nav-link">
  etcd
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programming/algo/" class="nav-link">
  算法与数据结构
</a></li><li class="dropdown-item"><!----> <a href="/programming/pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/opersystem/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/opersystem/linux/" class="nav-link">
  linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/tool/goland/" class="nav-link">
  goland
</a></li><li class="dropdown-item"><!----> <a href="/tool/vscode/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/tool/pycharm/" class="nav-link">
  pycharm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/rabbitmq/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/other/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/other/k8s/" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/other/workrecord/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/other/interview/" class="nav-link">
  面试宝典
</a></li><li class="dropdown-item"><!----> <a href="/other/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jlinzhou" target="_self" rel="" class="nav-link external">
  Github
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/golang/" class="nav-link router-link-exact-active router-link-active">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/backend/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/backend/cplus/" class="nav-link">
  c++
</a></li><li class="dropdown-item"><!----> <a href="/backend/lua/" class="nav-link">
  lua
</a></li><li class="dropdown-item"><!----> <a href="/backend/vba/" class="nav-link">
  vba
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/database/mongodb/" class="nav-link">
  mongodb
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  redis
</a></li><li class="dropdown-item"><!----> <a href="/database/etcd/" class="nav-link">
  etcd
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programming/algo/" class="nav-link">
  算法与数据结构
</a></li><li class="dropdown-item"><!----> <a href="/programming/pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/opersystem/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/opersystem/linux/" class="nav-link">
  linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/tool/goland/" class="nav-link">
  goland
</a></li><li class="dropdown-item"><!----> <a href="/tool/vscode/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/tool/pycharm/" class="nav-link">
  pycharm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/rabbitmq/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/other/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/other/k8s/" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/other/workrecord/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/other/interview/" class="nav-link">
  面试宝典
</a></li><li class="dropdown-item"><!----> <a href="/other/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jlinzhou" target="_self" rel="" class="nav-link external">
  Github
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>golang</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/golang/" class="active sidebar-link">golang基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/golang/#指针" class="sidebar-link">指针</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#切片" class="sidebar-link">切片</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#map" class="sidebar-link">map</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#结构体" class="sidebar-link">结构体</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#字符串" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#文件" class="sidebar-link">文件</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#并行并发" class="sidebar-link">并行并发</a></li><li class="sidebar-sub-header"><a href="/backend/golang/#网络通信" class="sidebar-link">网络通信</a></li></ul></li><li><a href="/backend/golang/context.html" class="sidebar-link">context</a></li><li><a href="/backend/golang/coredump.html" class="sidebar-link">go coredump调试笔记</a></li><li><a href="/backend/golang/distributed.html" class="sidebar-link">分布式技术原理</a></li><li><a href="/backend/golang/logrus.html" class="sidebar-link">logrus的使用</a></li><li><a href="/backend/golang/map.html" class="sidebar-link">哈希表</a></li><li><a href="/backend/golang/micro.html" class="sidebar-link">微服务</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="指针"><a href="#指针" class="header-anchor">#</a> 指针</h2> <p>指针就是地址。指针变量就是存储地址的变量。</p> <p>*p:解引用、间接引用。</p> <p>栈帧：用来给函数运行提供内存空间。取内存于stack上。</p> <p>​			当函数调用时，产生栈帧。函数调用结束，释放栈帧。</p> <p>​			栈帧存储：1.局部变量。2形参。（形参与局部变量存储地位等同）3.内存字段描述值</p> <p>指针使用注意：</p> <p>​	空指针：未被初始化的指针。var p *int    *p--&gt;err</p> <p>​	野指针：被一片无效的地址空间初始化。</p> <p>申请的内存空间在栈上会自动释放，在堆上不会自动释放,new创建的是在堆上。</p> <p>格式化输出：</p> <p>​	%q:以Go语言格式显示字符串。默认带有“”符</p> <p>​	%v:显示对应数据详细信息</p> <p>变量存储：</p> <p>​	等号 左边的变量，代表变量所指向的内存空间</p> <p>​	等号 右边的变量， 代表变量内存空间存储的数据值</p> <p>指针的函数传参：</p> <p>​	传地址（引用）：将地址值作为函数参数，返回后传递。</p> <p>​	传值（数据）：将实参的值拷贝一份给形参。</p> <p>​	传引用：在A栈帧内部，修改B栈帧中的变量值</p> <h2 id="切片"><a href="#切片" class="header-anchor">#</a> 切片</h2> <p>​	为什么用切片：</p> <p>​		1.数组的容量固定，不能自动拓展。</p> <p>​		2.值传递，数组作为函数参数时，将整个数组值拷贝一份给形参。</p> <p>​		在Go语言中。我们几乎可以在所有场景中，使用切片替换数组使用。</p> <p>​	切片的本质，不是一个数组的指针，是一种数据结构，用来操作数组内部元素.</p> <p>​		runtime/slice.go  type  slice struct { *p len cap }</p> <p>​	切片的使用：</p> <p>​		数组和切片定义区别：</p> <p>​			创建数组时[]指定数组长度。</p> <p>​			创建切片时，[]为空，或者...</p> <p>​		切片名称[low:high:max]</p> <p>​		low:起始下标位置</p> <p>​		high:结束下标位置 len=high-low</p> <p>​		容量：cap=max-low  是从它的第一个元素开始数，到其底层数组元素末尾的个数 。</p> <p>​		截取数组，初始化切片时，切片容量跟随原数组。</p> <p>​		s[:high:max]:从0开始，到high结束。（不包含）</p> <p>​		s[low:]:从low开始，到末尾</p> <p>​		s[:high]:从0开始，到high结束。容量跟随原先容量。【常用】</p> <p>​	切片创建：</p> <p>​		1.自动推导类型创建切片。slice:=[]int{1,2,3,4}</p> <p>​		2.slice:=make([]int,长度，容量)</p> <p>​		3.slice:=make([]int,长度)创建切片时，没有指定容量，容量==长度</p> <p>​		<strong>注意：make只能创建slice、map和channel，并且返回一个有初始值（非零）的对象</strong></p> <p>​	切片做函数参数---传引用。（传地址）</p> <p>​	append:</p> <p>​		向切片增加元素时，切片的容量会自动增长。1024以下时，以两倍方式增长。</p> <p>​	copy:</p> <p>​		copy(目标位置切片，源切片)，拷贝过程中，直接对应位置拷贝</p> <p>​		copy(data[idx:],data[idx+1:]) return data[:len(data)-1]</p> <h2 id="map"><a href="#map" class="header-anchor">#</a> map</h2> <p>字典、映射   key-value  key:唯一、无序。不能是引用类型数据。</p> <p>​	map不能使用cap()</p> <p>​	创建方式：</p> <p>​		1.var m1 map[int]string  ---不能存储数据</p> <p>​		2.m2:=map[int]string --能存储数据</p> <p>​		3.m3:=make(map[int]string)--默认len=0</p> <p>​		4.m4:=make(map[int]string,10)</p> <p>​	删除map:</p> <p>​		delete()函数</p> <p>​	strings.Fields()将字符串拆分成字符串切片</p> <h2 id="结构体"><a href="#结构体" class="header-anchor">#</a> 结构体</h2> <p>​	是一种数据类型</p> <p>普通变量定义和初始化</p> <p>​		1.顺序初始化：依次将结构体内部成员初始化。</p> <p>​		2.制定成员初始化。---未初始化的成员变量，取该数据类型对应得默认值</p> <p>​	结构体变量的比较和赋值：</p> <p>​		1.比较：只能使用==和!= 不能使用&gt; &lt; &gt;= &lt;=</p> <p>​		2.相同结构体类型(成员变量的类型、个数、顺序一致)变量之间可以直接赋值。</p> <p>​	结构体地址：</p> <p>​		结构体变量的地址==结构体首个元素的地址。</p> <p>​	结构体传参：</p> <p>​		unSafe.Sizeof(变量名)----&gt;此种类型的变量所占用内存空间的大小</p> <p>​		将结构体变量的值拷贝一份，传参。--几乎不用，内存消耗大，效率低。</p> <p>指针变量定义和初始化：</p> <p>​		1.顺序初始化：依次将结构体内部所有成员初始化。</p> <p>​		2.new(person)</p> <p>​	结构体地址：</p> <p>​		结构体变量的地址==结构体首个元素的地址。</p> <p>​	结构体指针传参：</p> <p>​		unSafe.Sizeof(指针)：不管何种类型的指针，在64位操作系统下，大小一致，均为8字节。</p> <p>​		将结构体变量的地址值，传递（传引用）。---使用频率非常高！！！</p> <p>​	结构体指针做函数返回值：</p> <p>​		不能返回局部变量的地址值。------局部变量保存在栈帧上，函数调用结束后，栈帧释放，局部变量的地址，不再受系统保护，随时可能分配给其他程序。</p> <p>​		可以返回局部变量的值。</p> <h2 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h2> <p>​	1.字符串分割 strings.Split(&quot;1.2.3&quot;,&quot;.&quot;)</p> <p>​	2.字符串以空格分割strings.Fileds(&quot;&quot;)</p> <p>​	3.判断字符串结束标记HasSuffix   strings.HasSuffix(&quot;test.abc&quot;,&quot;abc&quot;)</p> <p>​	4.判断字符串起始标记HasPrefix  strings.HasPrefix(&quot;test.abc&quot;,&quot;test&quot;)</p> <h2 id="文件"><a href="#文件" class="header-anchor">#</a> 文件</h2> <p>​	打开创建文件:</p> <p>​		1.创建文件 Create:文件不存在，文件存在，将文件清空。</p> <p>​				参数:name ，打开文件的路径：绝对路径、相对路径</p> <p>​		2.打开文件Open: 以只读文件打开。</p> <p>​				参数:name ，打开文件的路径：绝对路径、相对路径</p> <p>​		3.打开文件OpenFile:以只读，只写、读写方式打开。</p> <p>​				参1：name ，打开文件的路径：绝对路径、相对路径</p> <p>​				参2：打开文件权限：O_RDONLY、O_WRONLY 、O_RDWR</p> <p>​				参3:一般传6/7</p> <p>​	写文件：</p> <p>​		按字符串写：WriteString()--&gt;n个写入的字符个数</p> <p>​			<strong>回车换行：windows:\r\n   linux:\n</strong></p> <p>​		按位置写</p> <p>​			Seek():修改文件的读写指针位置。</p> <p>​			参1：偏移量。正：向文件尾偏。负：向文件头偏。</p> <p>​			参2：偏移量起始位置。</p> <p>​				io.SeekStart  文件起始位置</p> <p>​				io.SeekCurrent  文件当前位置</p> <p>​				io.SeekEnd  文件结尾位置</p> <p>​			返回值:表示文件起始位置，到文件读写指针位置的偏移量。</p> <p>​			off,_:=f.Seek(-5,io.SeekEnd)</p> <p>​		按字节写</p> <p>​			WriteAt():在文件指定偏移位置写入[]byte，通常搭配Seek()</p> <p>​			参1：待写入的数据</p> <p>​			参2：偏移量</p> <p>​			返回值：写入文件的字节数</p> <p>​			n,_=f.WriteAt([]byte(&quot;111&quot;),off)</p> <p>​	读文件：</p> <p>​		<strong>按行读(常用)</strong></p> <p>​			1.创建一个带有缓冲区的Reader(读写器)</p> <p>​				reader:=bufio.NewReader(打开的文件指针)</p> <p>​			2.从reader的缓冲区中，读取指定长的数据，数据的长度取决于参数dlime</p> <p>​				buf,err:=reader.ReadBytes('\n')按行读。</p> <p>​				判断到达文件末尾:  if err!=nil &amp;&amp; err== io.EOF  到文件结尾。</p> <p>​							文件结束标记，是要单独读一次获取到的。</p> <p>​			<strong>缓存区：内存中的一块区域，用来减少物理硬盘访问操作</strong>。&lt;&lt;计算硬件及组成原理&gt;&gt;---机械工业出版社</p> <p>​	按字节读写文件。</p> <p>​		read():按字节读文件</p> <p>​		write()：按字节写文件</p> <p>​	目录操作：</p> <p>​		打开目录：OpenFile</p> <p>​			参1：name ，打开目录的路径：绝对路径、相对路径</p> <p>​			参2：打开目录权限：O_RDONLY、O_WRONLY 、O_RDWR</p> <p>​			参3:os.ModeDir</p> <p>​		返回值：返回一个可以读写目录的指针</p> <p>​		读目录：Readdir</p> <h2 id="并行并发"><a href="#并行并发" class="header-anchor">#</a> 并行并发</h2> <p>​	并行：在同一时刻，有多条指令在多个处理器上同时执行。	借助多核cpu实现    (真  并行)</p> <p>​	并发：在同一时刻只能有一条指令执行，但多个进程指令被快速的轮换执行。</p> <p>​		宏观：用户体验上，程序在并行执行。</p> <p>​		微观：多个计划任务，顺序执行，在飞快的切换。轮换使用cpu时间轮换。  (假 并行)</p> <p>​	进程并发：</p> <p>​		程序：编译成功得到的二进制文件。 占用磁盘空间。 死的  1</p> <p>​		进程：运行起来的程序。占用系统资源。（内存）      活的  N</p> <p>​	进程状态：</p> <p>​		初始态、就绪态、运行态、挂起（阻塞）态、终止（停止）态。</p> <p>​	孤儿进程:	父进程先于子进程结束，则子进程成为孤儿进程，子进程的父进程成为init进程，称为init进程领养孤儿进程。</p> <p>​	僵尸进程：进程终止，父进程尚未回收，子进程残留资源（PCB）存放于内核中，变成僵尸（Zombie）进程.</p> <h3 id="线程并发"><a href="#线程并发" class="header-anchor">#</a> 线程并发</h3> <p>​	LWP  **轻量级的进程 **，在linux依然是进程。  **最小的执行单位 **。----cpu分配时间轮片的对象。</p> <p>​	进程： **最小的系统资源分配单位。 **</p> <p>​	目的是为了并行的争夺cpu，提高cpu执行速度。</p> <p>​	同步：</p> <p>​		协同步调，规划先后顺序。</p> <p>​		线程同步机制：</p> <p>​			互斥锁(互斥量)：建议锁，拿到锁以后，才能访问数据，没有拿到锁的线程，阻塞等待，等到锁的线程释放锁。</p> <p>​			读写锁：一把锁（读属性、写属性）。写独占，读共享。写锁优先级高。</p> <h3 id="协程并发"><a href="#协程并发" class="header-anchor">#</a> 协程并发</h3> <p>​	协程，coroutine， **轻量级线程。 **</p> <p>​	python、lua、Ruset...</p> <p>​	21世纪。</p> <p>​	目的是为了程序的执行效率。在阻塞等待期间可以做其他的事情。</p> <p>总结：进程、线程、协程都可以完成并发。</p> <p>​			稳定性强、节省资源、效率高。</p> <p>​</p> <h3 id="goroutine-go程"><a href="#goroutine-go程" class="header-anchor">#</a> Goroutine:go程</h3> <p>并不是由操作系统调度的 ， 避免了上下文切换的额外耗费</p> <p><strong>奉行通过通信来共享内存，而不是通过共享内存来通信</strong></p> <p>​	创建于进程中。直接使用go关键字，放置于函数调用前面，产生一个go程，并发。</p> <p>​	goroutine的特性：</p> <p>​		主go程结束，子go程随之退出。</p> <p>​</p> <p>​	runtime包</p> <p>​		runtime.Gosched():出让当前go程所占用的cpu时间片。当再次获得cpu时，从出让位置继续恢复执行。</p> <p>​		----时间片轮转调度算法。</p> <p>​		runtime.Goexit():</p> <p>​			return:返回m8当前函数调用到调用者那里去，return之前的defer注册生效。</p> <p>​			Goexit:退出当前go程。结束调用该函数的当前go程，goexit()之前注册的defer都生效。</p> <p>​		runtime.GOMAXPROCS():设置可以并行计算的cpu核数的最大值，并返回之前的值。</p> <p>=========</p> <p>[补充知识点]</p> <p>​	每当有一个进程启动时，系统会自动打开三个文件：标准输入、标准输出、标准错误。-----对应三个文件stdin、stdout、stderr。当进程运行结束，操作系统自动关闭三个文件。</p> <h3 id="channel"><a href="#channel" class="header-anchor">#</a> channel</h3> <p>​		是一种数据类型，对应一个“管道”。</p> <p>​		channel的定义：</p> <p>​			make（chan 在channel中传递的数据类型，容量)  容量=0：无缓冲；容量&gt;0，有缓冲channel。</p> <p>​			e.g. make(chan int)或make(chan string ,0)</p> <p>​		len(ch)读取channel剩余读取数据的个数，cap(ch)通道的容量。</p> <p>​	无缓冲channel:----同步通信</p> <p>​		通道容量为0，len=0.不能存储数据。</p> <p>​		channel应用于两个go程中。一个读，另一个写。</p> <p>​		具备同步的能力。读写同步。</p> <p>​	有缓冲channel----异步通信</p> <p>​		通道容量为非0.</p> <p>​		channel应用于两个go程中。一个读，另一个写。</p> <p>​	关闭channel</p> <p>​		确定不再向对端发送数据，使用close(ch)来关闭channel</p> <p>​		对端可以判断channel是否关闭</p> <p>​			if num,ok:=&lt;-ch;ok{}</p> <p>​			可以使用range替换ok</p> <p>​		总结：1.数据不发送完，不应该关闭</p> <p>​					2.已经关闭的channel，不能再向其写入数据。</p> <p>​					3.写端已经关闭channel，可以从中读取数据，读到0.----说明：写端关闭.</p> <p>​		单向channel:</p> <p>​			默认的channel是双向的. var ch chan int   ch=make(chan int)</p> <p>​			单向写channel：var sendCh chan&lt;-int   sendCh=make(chan&lt;-int)不能读操作</p> <p>​			单向读channel:   var recvCh &lt;-chan int   recvCh=make(&lt;-chan int)</p> <p>​			转换：</p> <p>​				1.双向channel可以隐式转换为任意一种单向channel</p> <p>​						sendCh=ch</p> <p>​				2.单向channel不能转换为双向channel</p> <p>​					ch=sendCh    error!</p> <p>​				<strong>传参，传引用</strong></p> <p>​	生产者消费者模型</p> <p>​		生产者：</p> <p>​		消费者：</p> <p>​		缓冲区：1.解耦（降低生产者和消费者之间的耦合度）</p> <p>​						2.并发 (生产者消费者数量不对等时，能保持正常通信)</p> <p>​						3.缓存 (生产者和消费者数据处理速度不一致时，暂存数据)</p> <p>​	time  sleep()  After() NewTimer() NewTicker()</p> <p>​	定时器</p> <p>​		Timer:创建定时器，指定定时时长，定时到达后。系统会自动向定时器的成员C写系统当前时间。</p> <p>​		time.After()</p> <p>​		time.NewTimer()</p> <p>​		定时器的停止、重置：</p> <p>​			1)创建定时器myTimer:=time.NewTimer(2*time.Second)</p> <p>​			2)停止：myTimer.Stop  ---将定时器归零.  &lt;-myTimer.C会阻塞</p> <p>​			3)重置：myTimer.Reset(time.Second)</p> <p>​		time.Stop()设置定时器停止</p> <p>​		time.Reset()定时器重置</p> <p>select    其中case语句里必须是一个IO操作。一般不写default，避免忙轮询。</p> <p>​	作用：用来监听channel上的数据流动方向。读？写？</p> <p>​	用法：参考switch case语句。但case后面必须是IO操作，不可以任意写判别表达式。</p> <p>​	注意事项：</p> <p>​		1.监听的case中，没有满足监听条件，阻塞。</p> <p>​		2.监听的case中，有多个满足监听条件，任选一个执行。</p> <p>​		3.可以使用default来处理所有case都不满足监听条件的状况。通常不用（会产生忙轮询）</p> <p>​		4.select自身不带有循环机制，需借助外层for来循环监听。</p> <p>​		5.break只能跳出select，类似于switch中的用法。</p> <p>死锁：</p> <p>​	1.单go程自己死锁</p> <p>​		channel应该在至少2个以上的go程中进行通信，否则死锁。</p> <p>​	2.go程间channel访问顺序导致死锁</p> <p>​		使用channel一端读（写），要保证另一端写（读）操作，同时有机会执行。否则死锁</p> <p>​	3.多go程，多channel交叉死锁</p> <p>​		Ago程，掌握M的同时，尝试N；Bgo程，掌握N的同时尝试拿M.</p> <p>​	4.在go语言中，尽量不要将互斥锁、读写锁与channel混用。----隐性死锁</p> <p>互斥锁：（互斥量）</p> <p>​	A、 B  go程共同访问共享数据。由于cpu调度随机，需要对共享数据访问顺序加以限定（同步）。</p> <p>​	创建mutex(互斥锁)，访问共享数据之前，加锁，访问结束，解锁。在Ago程加锁期间。Bgo程加锁会失败---阻塞。直至Ago程解锁mutex，B从阻塞处，恢复执行。</p> <p>读写锁：</p> <p>​	读时共享，写时独占。写锁优先级比读锁高。</p> <p>条件变量：sync.Cond</p> <p>​	本身不是锁!经常要与锁结合使用!!</p> <p>​	使用流程：</p> <p>​	1.创建条件变量： var cond   sync.Cond</p> <p>​	2.指定条件变量用的锁  conL=new(sync.Mutex)</p> <p>​	3.cond.L.Lock()  给公共区加锁（互斥量）</p> <p>​    4.判断是否到达阻塞条件（缓冲区满/空）---for 循环判断</p> <p>​			for len(ch)==cap(ch) {  cond.Wait()   ----1) } 阻塞   2）解锁  3)加锁</p> <p>​	5.访问公共区----读、写数据、打印</p> <p>​	6.解锁条件变量用的锁 cond.L.Unlock()</p> <p>​	7.唤醒阻塞在条件变量上的对端。signal()  Broadcast()</p> <h2 id="网络通信"><a href="#网络通信" class="header-anchor">#</a> 网络通信</h2> <p>​	协议：一组规则。要求使用协议的双方，必须严格遵守协议内容。</p> <p>​	网络分层架构：</p> <p>​		OSI/RM（理论上的标准）应用层 表示层 会话层 传输层  网络层  数据链路层  物理层（物数网传会表应）</p> <p>​		TCP/IP(事实上的标准)应用层  传输层  网络层  链路层(链网传应)</p> <p>​		越往右的层，越靠近硬件；越往左的层，越靠近用户。</p> <p>​	各层功能：</p> <p>​		链路层：ARP</p> <p>​						源MAC----目标MAC</p> <p>​						ARP协议作用：借助IP获取mac地址</p> <p>​		网络层：IP</p> <p>​						源IP-----目标IP</p> <p>​						IP协议的作用：在网络环境中唯一标识一台主机</p> <p>​						IP地址本质：2进制数。-----点分十进制IP地址（string)</p> <p>​		传输层：TCP/UDP</p> <p>​						port----在一台主机上唯一标识一个进程。</p> <p>​		应用层：ftp、http、自定义</p> <p>​						对数据进行封装、解封装</p> <p>数据通信过程：</p> <p>​	封装：应用层----传输层----网络层----链路层</p> <p>​	解封装：链路层---网络层----传输层-----应用层</p> <p>总结通信过程：</p> <p>​	1.mac地址（不需要用户指定）  （ARP协议）ip-------&gt;mac</p> <p>​	2.IP地址（需要用户指定）-----确定主机</p> <p>​	3.port端口号（需要用户指定）----确定程序</p> <p>​			1.不能使用系统占用的默认端口。5000+端口我们使用（8080）</p> <p>​			2.65535为端口上限</p> <p>socket编程：(双向全双工)</p> <p>​	网络通信过程中：socket一定是成对出现的。</p> <p>​</p> <p>网络设计模式：</p> <p>​	C/S：</p> <p>​		优点：数据传输效率高，协议选择灵活。</p> <p>​		缺点：工作量大，安全性构成威胁。</p> <p>​	B/S:</p> <p>​		优点：开发工作较小，不受平台限制，安全威胁小。</p> <p>​		缺点：缓存数据差，协议选择不灵活。</p> <p>TCP-CS客户端：</p> <p>​	1.conn,err:=net.Dial(&quot;TCP&quot;,服务器的IP+port)</p> <p>​	2.写数据的服务器conn.Write()</p> <p>​	3.读取服务器回发的数据conn.Read()</p> <p>​	4.conn.Close()</p> <p>TCP-CS并发服务端：</p> <p>​	1.创建监听套接字listener:=net.Listen(&quot;tcp&quot;,服务器的IP+port)</p> <p>​	2.defer listener.Close()</p> <p>​	3.for 循环阻塞监听客户端连续事件 conn:=listen.Accept()</p> <p>​	4.创建go程对应每一个客户端进行数据通信 go HandlerConnect()</p> <p>​	5.实现HandlerConnect(conn net.Conn)</p> <p>​			1)defer conn.Close()</p> <p>​			2)获取成功连接的客户端Addr    conn.RemoteAddr()</p> <p>​			3)for  循环  读取客户端发送数据  conn.Read(buf)</p> <p>​			4)处理数据 小----大</p> <p>​			5)回写转换后的数据  conn.Write(buf[:n])</p> <p>服务器判断关闭：</p> <p>​	<strong>read读客户端，返回0----对端关闭!</strong></p> <p>三次握手</p> <p>​	客户端主动发起连接请求端，标志位SYN  2000(0),被动接收连接请求端，请求端回复ACK  2001和SYN 7000(0)，客户端回复ACK 7001  三次握手完成---连接建立完成.</p> <p>​	1.主动发起请求端，发送SYN</p> <p>​	2.被动建立连接请求端，应答ACK同时发送SYN</p> <p>​	3.主动发起请求端，发送应答ACK</p> <p>​	标志TCP三次握手建立完成.---server.Accept()返回。  ----client.Dial()返回</p> <p>四次挥手(因为半关闭)</p> <p>​	客户端主动发出关闭请求，标志位FIN 2000(0) ，被动关闭连接请求端，回复ACK 2001，这时主动关闭端处于半关闭，被动关闭连接请求端再次回复FIN  5000(0)，主动关闭端回复ACK 5001 ,四次挥手完成.</p> <p>​	1.主动关闭连接请求端，发送FIN</p> <p>​	2.被动关闭连接请求端，应答ACK      标志。半关闭完成。-----close()(服务端)</p> <p>​	3.被动关闭连接请求端，发送FIN</p> <p>​	4.主动关闭请求端，应答ACK   标志。四次挥手建立完成----close()（客户端）</p> <ul><li>封装：通过方法实现</li> <li>继承：通过匿名字段实现</li> <li>多态：通过接口实现</li></ul> <p>​</p> <p>​</p> <p>​</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020年4月19日星期日晚上8点32分</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/backend/golang/context.html">
        context
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.9c66cc77.js" defer></script><script src="/assets/js/6.a4c4b5d6.js" defer></script><script src="/assets/js/2.1492d491.js" defer></script><script src="/assets/js/10.87145463.js" defer></script><script src="/assets/js/3.90399333.js" defer></script>
  </body>
</html>
